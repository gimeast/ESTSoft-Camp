<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="./style/reset.css" />
        <link rel="stylesheet" href="./style/style.css" />
        <title></title>
    </head>
    <body>
        <div id="root"></div>
        <script
            src="https://unpkg.com/react@18/umd/react.development.js"
            crossorigin
        ></script>
        <script
            src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
            crossorigin
        ></script>
        <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
        <script type="text/babel">
            fetch("https://dev.wenivops.co.kr/services/fastapi-crud/1/product")
                .then((response) => response.json())
                .then((data) => {
                    console.log(data);

                    function Card({ productName, price, thumbnailImg }) {
                        return (
                            <div className="product-item">
                                <h2 className="product-name">{productName}</h2>
                                <img
                                    className="product-img"
                                    src={thumbnailImg}
                                    alt=""
                                />
                                <p className="product-price">{price}</p>
                            </div>
                        );
                    }

                    {
                        /* Card 컴포넌트에 콘텐츠로 전달하는 방법 */
                    }
                    {
                        /* (가장 많이 사용) Card 컴포넌트에 속성으로 전달하는 방법 */
                    }
                    {
                        /* Card 컴포넌트를 중괄호 안에 넣어 자바스크립트처럼 사용하는 방법 */
                    }
                    const app = (
                        <div className="product-list">
                            {data.map((v) => {
                                return (
                                    <Card
                                        productName={v.productName}
                                        price={v.price}
                                        thumbnailImg={v.thumbnailImg}
                                    />
                                );
                            })}
                            <hr />
                            {data.map((v) => {
                                return Card(v);
                            })}
                        </div>
                    );

                    // DOM에 리액트 컴포넌트 랜더링하기
                    const domContainer = document.querySelector("#root");
                    const root = ReactDOM.createRoot(domContainer);
                    root.render(app, domContainer);
                })
                .catch((error) => console.error("Error fetching data:", error));
        </script>
    </body>
</html>
